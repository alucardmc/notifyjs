/** Notify.js - v0.3.1 - 2014/05/08
 * http://notifyjs.com/
 * Copyright (c) 2014 Jaime Pillora - MIT
 */
(function(t,i,n,e){"use strict";var r,o,s,a,h,l,c,p,u,d,f,m,w,y,v,g,b,x,S,k,P,N,C,H,T,A,M,j,z,D=[].indexOf||function(t){for(var i=0,n=this.length;n>i;i++)if(i in this&&this[i]===t)return i;return-1};C="notify",N=C+"js",s=C+"!blank",T={t:"top",m:"middle",b:"bottom",l:"left",c:"center",r:"right"},y=["l","c","r"],z=["t","m","b"],S=["t","b","l","r"],k={t:"b",m:null,b:"t",l:"r",c:null,r:"l"},P=function(t){var i;return i=[],n.each(t.split(/\W+/),function(t,n){var r;return r=n.toLowerCase().charAt(0),T[r]?i.push(r):e}),i},j={},a={name:"core",html:'<div class="'+N+'-wrapper">\n  <div class="'+N+'-arrow"></div>\n  <div class="'+N+'-container"></div>\n</div>',css:"."+N+"-corner {\n  position: fixed;\n  margin: 5px;\n  z-index: 1050;\n}\n\n."+N+"-corner ."+N+"-wrapper,\n."+N+"-corner ."+N+"-container {\n  position: relative;\n  display: block;\n  height: inherit;\n  width: inherit;\n  margin: 3px;\n}\n\n."+N+"-wrapper {\n  z-index: 1;\n  position: absolute;\n  display: inline-block;\n  height: 0;\n  width: 0;\n}\n\n."+N+"-container {\n  display: none;\n  z-index: 1;\n  position: absolute;\n  cursor: pointer;\n}\n\n[data-notify-text],[data-notify-html] {\n  position: relative;\n}\n\n."+N+"-arrow {\n  position: absolute;\n  z-index: 2;\n  width: 0;\n  height: 0;\n}"},M={"border-radius":["-webkit-","-moz-"]},m=function(t){return j[t]},o=function(i,e){var r,o,s,a;if(!i)throw"Missing Style name";if(!e)throw"Missing Style definition";if(!e.html)throw"Missing Style HTML";return(null!=(a=j[i])?a.cssElem:void 0)&&(t.console&&console.warn(""+C+": overwriting style '"+i+"'"),j[i].cssElem.remove()),e.name=i,j[i]=e,r="",e.classes&&n.each(e.classes,function(t,i){return r+="."+N+"-"+e.name+"-"+t+" {\n",n.each(i,function(t,i){return M[t]&&n.each(M[t],function(n,e){return r+="  "+e+t+": "+i+";\n"}),r+="  "+t+": "+i+";\n"}),r+="}\n"}),e.css&&(r+="/* styles for "+e.name+" */\n"+e.css),r&&(e.cssElem=x(r),e.cssElem.attr("id","notify-"+e.name)),s={},o=n(e.html),u("html",o,s),u("text",o,s),e.fields=s},x=function(t){var i;i=h("style"),i.attr("type","text/css"),n("head").append(i);try{i.html(t)}catch(e){i[0].styleSheet.cssText=t}return i},u=function(t,i,e){var r;return"html"!==t&&(t="text"),r="data-notify-"+t,p(i,"["+r+"]").each(function(){var i;return i=n(this).attr(r),i||(i=s),e[i]=t})},p=function(t,i){return t.is(i)?t:t.find(i)},f=function(){var e,r,o,s;return s=0,n(i).height()>n(t).height()&&(n("body").append('<div id="fakescrollbar" style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"></div>'),e=n("#fakescrollbar"),e.append('<div style="height:100px;">&nbsp;</div>'),r=e.find("div").innerWidth(),e.css("overflow-y","scroll"),o=n("#fakescrollbar").find("div").html("html is required to init new width.").innerWidth(),e.remove(),s=r-o-5),s},v=function(t){return t/2},H={clickToHide:!0,autoHide:!0,autoHideDelay:5e3,arrowShow:!0,arrowSize:5,breakNewLines:!0,elementPosition:"bottom",globalPosition:"top right",style:"bootstrap",className:"error",showAnimation:"slideDown",showDuration:400,hideAnimation:"slideUp",hideDuration:200,gap:5},b=function(t,i){var e;return e=function(){},e.prototype=t,n.extend(!0,new e,i)},l=function(t){return n.extend(H,t)},h=function(t){return n("<"+t+"></"+t+">")},w={},d=function(t){var i;return t.is("[type=radio]")&&(i=t.parents("form:first").find("[type=radio]").filter(function(i,e){return n(e).attr("name")===t.attr("name")}),t=i.first()),t},g=function(t,i,n){var r,o;if("string"==typeof n)n=parseInt(n,10);else if("number"!=typeof n)return;if(!isNaN(n))return r=T[k[i.charAt(0)]],o=i,t[r]!==e&&(i=T[r.charAt(0)],n=-n),t[i]===e?t[i]=n:t[i]+=n,null},A=function(t,i,n){if("l"===t||"t"===t)return 0;if("c"===t||"m"===t)return n/2-i/2;if("r"===t||"b"===t)return n-i;throw"Invalid alignment"},c=function(t){return c.e=c.e||h("div"),c.e.text(t).html()},r=function(){function t(t,i,e){"string"==typeof e&&(e={className:e}),this.options=b(H,n.isPlainObject(e)?e:{}),this.loadHTML(),this.wrapper=n(a.html),this.wrapper.data(N,this),this.arrow=this.wrapper.find("."+N+"-arrow"),this.container=this.wrapper.find("."+N+"-container"),this.container.append(this.userContainer),t&&t.length&&(this.elementType=t.attr("type"),this.originalElement=t,this.elem=d(t),this.elem.data(N,this),this.elem.before(this.wrapper)),this.container.hide(),this.run(i)}return t.prototype.loadHTML=function(){var t;return t=this.getStyle(),this.userContainer=n(t.html),this.userFields=t.fields},t.prototype.show=function(t,i){var n,r,o,s,a,h=this;if(r=function(){return t||h.elem||h.destroy(),i?i():e},a=this.container.parent().parents(":hidden").length>0,o=this.container.add(this.arrow),n=[],a&&t)s="show";else if(a&&!t)s="hide";else if(!a&&t)s=this.options.showAnimation,n.push(this.options.showDuration);else{if(a||t)return r();s=this.options.hideAnimation,n.push(this.options.hideDuration)}return n.push(r),o[s].apply(o,n)},t.prototype.setGlobalPosition=function(){var t,e,r,o,s,a,l,c,p,u,d;return d=this.getPosition(),p=d[0],c=d[1],a=T[p],t=T[c],s=p+"|"+c,e=w[s],r=e,r||(e=w[s]=h("div"),e.addClass(""+N+"-corner"),n("body").append(e)),l=e.prepend(this.wrapper),r||(o={},o[a]=0,"middle"===t?o.top="45%":"center"===t?(u=v(n(i).width())-v(this.container.width())-f(),o.left=""+u+"px"):o[t]=0,e.css(o)),l},t.prototype.setElementPosition=function(){var t,i,r,o,s,a,h,l,c,p,u,d,f,m,w,v,b,x,P,N,C,H,M,j,E,L,O,W,I;for(M=this.getPosition(),N=M[0],x=M[1],P=M[2],u=this.elem.position(),l=this.elem.outerHeight(),d=this.elem.outerWidth(),c=this.elem.innerHeight(),p=this.elem.innerWidth(),j=this.wrapper.position(),s=this.container.height(),a=this.container.width(),m=T[N],v=k[N],b=T[v],h={},h[b]="b"===N?l:"r"===N?d:0,g(h,"top",u.top-j.top),g(h,"left",u.left-j.left),I=["top","left"],E=0,O=I.length;O>E;E++)C=I[E],w=parseInt(this.elem.css("margin-"+C),10),w&&g(h,C,w);if(f=Math.max(0,this.options.gap-(this.options.arrowShow?r:0)),g(h,b,f),this.options.arrowShow){for(r=this.options.arrowSize,i=n.extend({},h),t=this.userContainer.css("border-color")||this.userContainer.css("background-color")||"white",L=0,W=S.length;W>L;L++)C=S[L],H=T[C],C!==v&&(o=H===m?t:"transparent",i["border-"+H]=""+r+"px solid "+o);g(h,T[v],r),D.call(S,x)>=0&&g(i,T[x],2*r)}else this.arrow.hide();return D.call(z,N)>=0?(g(h,"left",A(x,a,d)),i&&g(i,"left",A(x,r,p))):D.call(y,N)>=0&&(g(h,"top",A(x,s,l)),i&&g(i,"top",A(x,r,c))),this.container.is(":visible")&&(h.display="block"),this.container.removeAttr("style").css(h),i?this.arrow.removeAttr("style").css(i):e},t.prototype.getPosition=function(){var t,i,n,e,r,o,s,a;if(i=this.options.position||(this.elem?this.options.elementPosition:this.options.globalPosition),t=P(i),0===t.length&&(t[0]="b"),n=t[0],0>D.call(S,n))throw"Must be one of ["+S+"]";return(1===t.length||(e=t[0],D.call(z,e)>=0&&(r=t[1],0>D.call(y,r)))||(o=t[0],D.call(y,o)>=0&&(s=t[1],0>D.call(z,s))))&&(t[1]=(a=t[0],D.call(y,a)>=0?"m":"l")),2===t.length&&(t[2]=t[1]),t},t.prototype.getStyle=function(t){var i;if(t||(t=this.options.style),t||(t="default"),i=j[t],!i)throw"Missing style: "+t;return i},t.prototype.updateClasses=function(){var t,i;return t=["base"],n.isArray(this.options.className)?t=t.concat(this.options.className):this.options.className&&t.push(this.options.className),i=this.getStyle(),t=n.map(t,function(t){return""+N+"-"+i.name+"-"+t}).join(" "),this.userContainer.attr("class",t)},t.prototype.run=function(t,i){var r,o,a,h,l,u=this;if(n.isPlainObject(i)?n.extend(this.options,i):"string"===n.type(i)&&(this.options.className=i),this.container&&!t)return this.show(!1),e;if(this.container||t){o={},n.isPlainObject(t)?o=t:o[s]=t;for(a in o)r=o[a],h=this.userFields[a],h&&("text"===h&&(r=c(r),this.options.breakNewLines&&(r=r.replace(/\n/g,"<br/>"))),l=a===s?"":"="+a,p(this.userContainer,"[data-notify-"+h+l+"]").html(r));return this.updateClasses(),this.elem?this.setElementPosition():this.setGlobalPosition(),this.show(!0),this.options.autoHide?(clearTimeout(this.autohideTimer),this.autohideTimer=setTimeout(function(){return u.show(!1)},this.options.autoHideDelay)):e}},t.prototype.destroy=function(){return this.wrapper.remove()},t}(),n[C]=function(t,i,e){return t&&t.nodeName||t.jquery?n(t)[C](i,e):(e=i,i=t,new r(null,i,e)),t},n.fn[C]=function(t,i){return n(this).each(function(){var e;return e=d(n(this)).data(N),e?e.run(t,i):new r(n(this),t,i)}),this},n.extend(n[C],{defaults:l,addStyle:o,pluginOptions:H,getStyle:m,insertCSS:x}),n(function(){return x(a.css).attr("id","core-notify"),n(i).on("click notify-hide","."+N+"-wrapper",function(t){var i;return i=n(this).data(N),i&&(i.options.clickToHide||"notify-hide"===t.type)?i.show(!1):e})})})(window,document,jQuery);